<div class="popover-preview-container" >
    <div class="sc-d-flex">
        <button (click)="toggleSection('isPopoverPreviewVisible')" class="popover-preview-btn" [ngStyle]="{'background': btnBackground}">
            {{username}}
            <div class="btn-battlepass-lvl">
                <!--{{battlePass.level_priority}}-->
                1
            </div>
        </button>
    </div>
        <div class="popover-preview" *ngIf="isPopoverPreviewVisible"
             [ngStyle]="{
         'top':offsetTop > 0 && convertToPxl(offsetTop),
         'right':offsetRight > 0 && convertToPxl(offsetRight),
         'bottom':offsetBottom > 0 && convertToPxl(offsetBottom),
         'left': offsetLeft > 0 && convertToPxl(offsetLeft)}"
        >
            <scill-popover-preview-header [username]="username"
                                          [access-token]="accessToken"
                                          [app-id]="appId"
                                          [api-key]="apiKey"
                                          [user-id]="userId"
                                          [battle-pass-id]="battlePassId"
                                          [header-background]="headerBackground"
                                          [header-notch-absolute-right]="headerNotchAbsoluteRight"
                                          [header-text-color]="headerTextColor"
                                          [header-bp-lvl-color]="headerBpLvlColor"
                                          [header-progress-bar-background]="headerProgressBarBackground"
                                          [header-progress-bar-fill-background]="headerProgressBarFillBackground"
            >
            </scill-popover-preview-header>

            <scill-popover-preview-bp-section  [app-id]="appId"
                                               [api-key]="apiKey"
                                               [user-id]="userId"
                                               [battle-pass-id]="battlePassId"
                                               [access-token]="accessToken"
                                               [battle-pass-finished-type-bg-color]="battlePassFinishedTypeBgColor"
                                               [battle-pass-in-progress-type-bg-color]="battlePassInProgressTypeBgColor"
                                               [battle-pass-type-border-color]="battlePassTypeBorderColor"
                                               [battle-pass-type-icon-color]="battlePassTypeIconColor"
                                               [battle-pass-title-color]="battlePassTitleColor"
                                               [battle-pass-lvl-progress-bar-background]="battlePassLvlProgressBarBackground"
                                               [battle-pass-lvl-progress-bar-fill-background]="battlePassLvlProgressBarFillBackground"
                                               [battle-pass-challenge-progress-background]="battlePassChallengeProgressBackground"
                                               [battle-pass-challenge-progress-fill-background]="battlePassChallengeProgressFillBackground"
                                               [battle-pass-challenge-background]="battlePassChallengeBackground"
            >
            </scill-popover-preview-bp-section>

            <scill-popover-preview-section *ngFor="let category of categories;"
                                           [title]="category.category_name"
                                           [challenges]="category.challenges"
                                           [category]="category"
                                           [app-id]="appId"
                                           [access-token]="accessToken"
                                           [personal-challenges-category-title-color]="personalChallengesCategoryTitleColor"
                                           [personal-challenges-category-progress-bar-background]="personalChallengesCategoryProgressBarBackground"
                                           [personal-challenges-category-progress-bar-fill-background]="personalChallengesCategoryProgressBarFillBackground"
                                           [personal-challenges-background]="personalChallengesBackground"
                                           [personal-challenges-progress-background]="personalChallengesProgressBackground"
                                           [personal-challenges-progress-fill-background]="personalChallengesProgressFillBackground"
                                           [personal-challenges-in-progress-type-bg-color]="personalChallengesInProgressTypeBgColor"
                                           [personal-challenges-finished-type-bg-color]="personalChallengesFinishedTypeBgColor"
                                           [personal-challenges-type-border-color]="personalChallengesTypeBorderColor"
                                           [personal-challenges-type-icon-color]="personalChallengesTypeIconColor"
            >
            </scill-popover-preview-section>

        </div>
</div>
